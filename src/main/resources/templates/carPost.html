<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      lang="en">
<head>
  <title>Объявление</title>
  <link rel='stylesheet' th:href="@{/css/posts.css}">
  <link rel='stylesheet' th:href="@{/css/verticalscroll.css}">
</head>
<body>

<div layout:fragment="breadcrumb">
  <span th:replace="~{fragments/breadcrumb::breadcrumb(${post.name})}"></span>
</div>

<div layout:fragment="page-content">
  <div th:replace="~{fragments/defssvg::difssvg}"></div>
  <div class="container mt-3" style="width: 890px">
    <div th:object="${post}">
      <div>
        <div class="d-flex align-items-center">
          <div class="ticket-title ticket-item flex-fill">
            <span class="bold bold-700-s22" th:text="*{name}"
                  style="font-weight: bold;"></span>
          </div>
          <div class="price-ticket ticket-item flex-fill" style="white-space: nowrap;">
            <span class="bold-700-s22 green"
                  th:text="|${#numbers.formatDecimal(post.price, 0, 'DEFAULT', 0, 'DEFAULT')} $|"></span>
          </div>
        </div>
        <div class="d-flex" style="height: 2rem;">
          <h3 class="under-head bold" th:text="*{modification.id.nameId}"></h3>
          <div th:if="*{@userSession.account?.id==account.id}"
               class="position-relative flex-grow-1">
            <a th:href="@{|/cars/edit/*{id}|}"
               class="position-absolute top-100 start-50 translate-middle">
              <button type="button" class="btn edit-btn">редактировать</button>
            </a>
          </div>

        </div>
        <div th:replace="~{fragments/postCar::clockSVG(*{created})}"></div>
      </div>

      <div id="modal-dialog" class="modal"
           style="display: none">
        <div class="close position-relative p-4" style="cursor: pointer">
                <span class="close-label cursor position-absolute top-50 start-50 translate-middle"
                      onclick="closeModal()">&times;</span>
        </div>

        <div class="gallery-container">
          <div class="thumbnails"></div>
          <div class="scrollbar">
            <div class="thumb"></div>
          </div>
          <div class="slides">
            <div th:each="postIMG:*{images}">
              <img th:src="@{|/cars/img/${postIMG}|}">
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-start align-items-start">
        <div class="mt-2 me-4">
          <div class="d-flex justify-content-between flex-column"
               style="height: 130px; margin-top: 10px; margin-bottom: 37px;
               background-color: #f3fafd;padding: 15px 30px;border-radius: 0.375rem;">
            <div style="padding-left: 20px;"
                 th:text="|г.*{city.name}|">
            </div>
            <div style="padding-left: 20px;">
              <div class="ms-3" style="color: #9b9b9b;font-size: small;">продавец</div>
              <div th:text="*{account.firstName}" class="fw-bolder fs-5"></div>
            </div>
            <div style="padding-left: 20px;">
              <span style="color: #9b9b9b;">тел.</span>
              <span th:text="*{account.phoneNumber}" class="fw-bolder size22 green"></span>
            </div>
          </div>

          <ul class="unstyle characteristic">
            <li layout:replace="~{layout/liTextValue::liTextTag('Год выпуска')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{year}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Кузов')}">
              <th:block layout:fragment="tag">
                <span th:replace="~{fragments/postCar::bodySVG(*{body})}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Цвет')}">
              <th:block layout:fragment="tag">
                <div class="ColorField__item EngineTypeField__icon"
                     th:classappend="|choose-color-*{color.color}|"
                     style="width: 18px;height: 18px;margin-left: 0 !important;"></div>
                <span th:text="*{color.name}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Пробег')}">
              <th:block layout:fragment="tag">
                <span th:replace="~{fragments/postCar::odometerSVG(*{odometer})}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Коробка')}">
              <th:block layout:fragment="tag">
                <span th:replace="~{fragments/postCar::tagSVG(*{gearbox})}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Привод')}">
              <th:block layout:fragment="tag">
                <span th:replace="~{fragments/postCar::tagSVG(*{transmission})}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('Двигатель')}">
              <th:block layout:fragment="tag">
                <span th:replace="~{fragments/postCar::tagSVG(*{engine})}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('модификация')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{modification.id.nameId}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('объём, см³')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{engineDisplacement}"></span>
              </th:block>
            </li>
            <li layout:replace="~{layout/liTextValue::liTextTag('мощность, л.с.')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{power}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('цилиндров')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{numberOfCylinders}"></span>
              </th:block>
            </li>

            <li layout:replace="~{layout/liTextValue::liTextTag('расположение')}">
              <th:block layout:fragment="tag">
                <span class="IconSvg_size_18 EngineTypeField__icon"></span>
                <span th:text="*{positionOfCylinders}"></span>
              </th:block>
            </li>
          </ul>
        </div>
        <div style="width: 580px">
          <div style="cursor: pointer">
            <img th:src="@{|/cars/img/*{images[0]}|}"
                 onclick="openModal(0)"
                 class="ImageGalleryDesktop__image"
                 style="border-radius: 2px">
          </div>
          <div class="d-flex justify-content-start flex-wrap">
            <div th:each="postIMG,iterStat:*{images}"
                 th:if="${!iterStat.first and iterStat.index<6}" class=" position-relative"
                 style="min-height: 80px; height: 80px; margin-right: 3px;margin-top: 3px; cursor: pointer">
              <img th:if="${iterStat.index<5}"
                   th:src="@{|/cars/img/${postIMG}|}"
                   th:onclick="|openModal(${iterStat.index})|"
                   style="border-radius: 2px; min-width: 129px;"
                   class="ImageGallery__thumb">
              <svg th:if="${iterStat.index==5}" onclick="openModal(5)"
                   xmlns="http://www.w3.org/2000/svg" width="16"
                   height="16" fill="currentColor"
                   viewBox="0 0 16 16"
                   style="height:60px; width: 45px; color:#208097"
                   preserveAspectRatio="none"
                   class="position-absolute top-50 start-0 translate-middle-y">
                <path fill-rule="evenodd" stroke-width="0.3" stroke="#208097" stroke-linecap="butt"
                      d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"/>
                <path fill-rule="evenodd" stroke-width="0.3" stroke="#208097"
                      d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"/>
              </svg>
            </div>
          </div>
          <div th:if="*{#lists.size(images)>5}" onclick="openModal(0)"
               class="mt-1 bread-link photo-list"
               style="transform: scale(0.85) translate(-7%,0%)">
            <span>всего фотографий </span>
            <span th:text="*{#lists.size(images)}"></span>
          </div>

          <!--          arrow-right-->
          <!--          element.style {-->
          <!--          border: 1px solid #256799;-->
          <!--          padding: 0.575rem;-->
          <!--          border-radius: 0.375rem;-->
          <!--          }-->
          <h3 th:text="*{name}" class="auto-content_title mt-5"></h3>
          <div class="mt-3"
               style="padding: 0.575rem;">
            <div class="mb-3">
                      <span style="font-size: 16px;color: #9b9b9b;"
                            class="mb-3">Год покупки - </span>
              <span>[[*{yearPurchase}]] </span>
            </div>

            <div class="mb-1" style="color: #9b9b9b;">Описание</div>
            <div th:text="*{description}" class="ms-3"></div>
          </div>

          <div class="ms-3 mt-3" style="margin-bottom: 200px">
            <div style="font-weight: 700;color: #9b9b9b;" class="mb-2">Опции</div>
            <th:block th:each="opt:*{optionsMap}">
              <div th:text="${opt.key}" style="color: #9b9b9b;" class="mt-2"></div>
              <span th:each="opt:${opt.value}" class="badge rounded-pill text-bg-light"
                    style="--bs-badge-padding-x: 0.7em;margin-top: 0.6em;margin-right: 0.6em"
                    th:text="${opt.name}"></span>
            </th:block>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<th:block layout:fragment="page-scripts">
  <script th:src="@{/js/verticalscroll.js}"></script>
</th:block>
</body>
</html>