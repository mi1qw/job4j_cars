<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">


<nav th:fragment="pagination(page,totalPages)" class=" mt-3"
     aria-label="Page navigation">

  <th:block th:if="${totalPages>1}">
    <nav>
      <ul class="pagination justify-content-center">
        <li class="page-item " th:classappend="${#strings.equals(page,'1')}?' disabled':''">
          <a class="page-link" th:href="@{|/posts?page=*{page-1}|}">Previous</a>
        </li>

        <!--1-->
        <li th:if="${page!=1}" class="page-item" aria-current=page>
          <a class="page-link" th:href="@{|/posts?page=1|}">1</a>
        </li>
        <!--        <li th:if="${page!=1}" class="page-item"-->
        <!--            th:classappend="${#strings.equals(page, '1')}?'active':''"-->
        <!--            th:attr="aria-current=${#strings.equals(page, '1')}?'page':''">-->
        <!--          <a class="page-link" th:href="@{|/posts?page=1|}" >1</a>-->
        <!--        </li>-->

        <!-- ... -->
        <th:block th:if="${(page-2)>2}">
          <li class="page-item">
            <span class="pagination-dots">...</span>
          </li>
        </th:block>

        <!--2-->
<!--        <th:block th:if="*{page==5}">-->
<!--          <li class="page-item">-->
<!--            <a class="page-link" th:href="@{|/posts?page=2|}">2</a>-->
<!--          </li>-->
<!--        </th:block>-->

        <!--234-->
        <th:block th:if="*{page>1}">
          <li class="page-item" th:each="ip:${#numbers.sequence(page-2,page-1)}"
              th:if="*{ip>=2}">
            <a class="page-link" th:href="@{|/posts?page=*{ip}|}" th:text="*{ip}"></a>
          </li>
        </th:block>
        <!--        <th:block th:each="ip:${#numbers.sequence(page-1-1,page-1)}"-->
        <!--                  th:if="*{ip>=1}">-->
        <!--          <li class="page-item">-->
        <!--            <a class="page-link" th:href="@{|/posts?page=*{ip}|}" th:text="*{ip}"></a>-->
        <!--          </li>-->
        <!--        </th:block>-->

        <!--selected page-->
        <li class="page-item active" aria-current='page'>
          <a class="page-link" th:href="@{|/posts?page=*{page}|}" th:text="*{page}"></a>
        </li>


        <th:block th:each="ip:${#numbers.sequence(page+1,page+2)}"
                  th:if="*{ip<=totalPages-1}">
          <li class="page-item">
            <a class="page-link" th:href="@{|/posts?page=*{ip}|}" th:text="*{ip}"></a>
          </li>
        </th:block>

<!--        <th:block th:if="${(totalPages-page)>4}">-->
<!--          <li class="page-item">-->
<!--            <span class="pagination-dots">...</span>-->
<!--          </li>-->
<!--        </th:block>-->

        <!-- ... -->
        <th:block th:if="${(page+2) < totalPages-1}">
          <li class="page-item">
            <span class="pagination-dots">...</span>
          </li>
        </th:block>

        <!--last page-->
        <li th:if="${page!=totalPages}" class="page-item" aria-current=page>
          <a class="page-link" th:href="@{|/posts?page=*{totalPages}|}"
             th:text="*{totalPages}"></a>
        </li>

        <li class="page-item" th:classappend="${#strings.equals(totalPages, page)}?'disabled':''">
          <a class="page-link" th:href="@{|/posts?page=*{page+1}|}">Next</a>
        </li>
      </ul>
    </nav>
  </th:block>

</nav>


</html>